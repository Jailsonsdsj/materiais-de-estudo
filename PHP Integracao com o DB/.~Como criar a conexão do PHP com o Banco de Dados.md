# Como criar a conex√£o do PHP com o Banco de Dados 



#### Requisitos

* Instalar o Xampp

- Inserir o banco de dados (caso seja importado) dentro da pasta htdocs do xampp

- Criar um novo projeto no VS Code



### Criando a conex√£o e uma consulta ao banco de dados



~~~~php+HTML
<?php 
//PASSO 1 - criando os dados do servidor
    $servidor = "localhost";
    $usuario = "root";
    $senha = "";
    $banco = "andes";
    //Necess√°rio jogar todos os dados num array
    $conecta = mysqli_connect($servidor,$usuario,$senha,$banco); //Obs: toda conexao aberta precisa ser fechada 

 //PASSO 2 - Identificando se h√° erro na conex√£o
  if (mysqli_connect_errno()){
      die("Conex√£o falou: ".mysqli_connect_errno());
  }   

  // PASSO 4 - Criando uma consulta ao banco de dados
  $consulta_produtos = "SELECT nomeproduto, precounitario, tempoentrega ";
  //Concatenando com a linha de cima. √â poss√≠vel fazer em uma √∫nica linha, mas geralmente concatenamos para organiza√ß√£o.
  //Isso evita que o FROM fique junto com o nome da coluna. Dica: sempre d√™ espa√ßo na primeira linha
  $consulta_produtos .= " FROM produtos";

  // PASSO 5 - Criando uma nova vari√°vel para recerber a query constru√≠da acima
  $produtos = mysqli_query($conecta, $consulta_produtos);

  // PASSO 6 - Realizando teste de nega√ß√£o
  if (!$produtos){
      die("Falha na consulta do banco de dados");
  }
?>


<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Curso PHP Integra√ß√£o com MySQL</title>
    </head>

    <body>
        
    </body>
</html>

<?php
    //PASSO 3- Encerrando a conex√£o
    mysqli_close($conecta);
?>
~~~~

Caso n√£o exiba nenhum erro, significa que a conex√£o foi estabelecida.



### Criando uma listagem de dados

~~~~php+HTML
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Curso PHP Integra√ß√£o com MySQL</title>
    </head>

    <body>
        <!--Fazendo a listagem de dados - M√©todo 1-->
        <?php
            //criando uma vari√°vel e atribuindo a fun√ß√£o mysqli_fetch_assoc a ela, junto com a vari√°vel de consulta criada anteriormente
            while ( $registro = mysqli_fetch_assoc($produtos)){
                print_r($registro);
                echo("<br>");

            //Outros m√©todos s√£o: mysqli_fetch_row e mysqli_fetch_array
            }   
        ?>
        

    </body>
</html>
~~~~



### Interagindo o c√≥digo PHP com elementos HTML

~~~~php+HTML
 <body>
        <ul>
            <?php
            //Para realizar a intera√ß√£o entre o c√≥digo PHP e os elementos do HTML, √© necess√°rio fechar o c√≥digo PHP para inserir o HTML
                while ( $registro = mysqli_fetch_assoc($produtos)){            
            ?>
                <!-- Mostrando os produtos da tabela dentro de uma lista n√£o ordenada, utilizando o php com html -->
                <li><?php echo $registro['nomeproduto'] ?></li>
            <?php
                }
            ?>
        </ul>

    </body>
~~~~



### Encerrando a consulta para liberar espa√ßo na mem√≥ria

~~~~php
mysqli_free_result($produtos);    
~~~~



### Include

Utilizado para inserir um c√≥digo de outro arquivo dentro do c√≥digo atual.

Caso haja um erro no c√≥digo importado, o php ir√° notificar, mas seguir√° executando o restante do c√≥digo

~~~~php+HTML
    <!--Incluindo o c√≥digo de outro arquivo-->
    <?php include("curso1.php");
    
    ?>
~~~~

### Include_once

Serve para que um c√≥digo seja exibido apenas uma vez, mesmo que, no c√≥digo, esteja declarado mais de uma.

~~~~php+html
<?php 
        include("curso1.php");
        echo "<br>";
        include_once("Curso1.php");
    ?>
~~~~

No caso acima, o c√≥digo Curso1.php s√≥ ser√° exibido uma vez.

### Reclue e Reclue_once

Tamb√©m servem para importar o c√≥digo de outro arquivo, por√©m caso haja um erro no c√≥digo importado, todo o c√≥digo base ser√° interrompido.

~~~~php+HTML
<?php 
        require("curso1.php");
        echo "<br>";
        require_once("Curso1.php");
    ?>
~~~~



### Criar arquivo de conex√£o

Para fins de seguran√ßa, √© fundamental que o conte√∫do a ser exibido para o usu√°rio fique localizado em uma pasta separada dos que dever√£o ser ocultos. 

Isso n√£o impedir√° que um hacker expert invada seus arquivos.

Primeiramente, √© necess√°rio criar um novo arquivo em uma pasta diferente da p√∫blica.

<a href="https://imgur.com/gYOWy4c"><img src="https://i.imgur.com/gYOWy4c.png" title="source: imgur.com" /></a>

Em seguida, basta estabelecer a conex√£o conforme o c√≥digo abaixo:

~~~~php+HTML
<?php 
    $servidor = "localhost";
    $usuario = "root";
    $senha = "";
    $banco = "andes";
    $conecta = mysqli_connect($servidor,$usuario,$senha,$banco); 


    if ( mysqli_connect_errno()){
        die("Conex√£o falhou: ".mysqli_conect_errno());
    }
?>

~~~~

Por fim, chamar o c√≥digo do arquivo "conex√£o.php" para o c√≥digo principal:

~~~~php
<?php 
    //chamando o c√≥digo da conex√£o que est√° localizado em uma pasta privada por motivo de seguran√ßa
    require_once("../../conexao/conexao.php");


  $consulta_produtos = "SELECT nomeproduto, precounitario, tempoentrega ";
  $consulta_produtos .= " FROM produtos";
  $produtos = mysqli_query($conecta, $consulta_produtos);

  if (!$produtos){
      die("Falha na consulta do banco de dados");
  }
?>
~~~~





### Criando uma listagem de produtos



#### Importando o c√≥digo da conex√£o, localizado na pasta privada:

~~~~php+html
<?php require_once("../../conexao/conexao.php"); ?>
~~~~

#### Criando a consulta ao banco de dados:

~~~~php+html
<?php
    $produtos = "SELECT produtoID, nomeproduto, tempoentrega, precounitario, imagempequena ";
    $produtos .=" FROM produtos ";
    $resultado = mysqli_query($conecta,$produtos); //obs: conecta √© a conex√£o que est√° localizada na pasta privada
    if (!$resultado){
        die("Falha na consulta ao banco");
    }

?>
~~~~

#### Juntando o array num elemento da lista

Observa√ß√µes:

- Para exibir uma imagem em php dentro do item li, basta inserir o c√≥digo no src da imagem

- A classe "imagem", declarada no li, cont√©m toda a formata√ß√£o no arquivo "produtos.css"

- Visto isso, √© poss√≠vel realizar qualquer altera√ß√£o nos elementos ao redor do array em php
- A fun√ß√£o mysqli_fetch_assoc √© respons√°vel por retornar os itens de um array de forma autom√°tica

~~~~php+html
<main>  
   <!--o id listagem_produtos cont√©m toda a estiliza√ß√£o no arquivo produtos.css-->
       <div id="listagem_produtos">
         <?php
            while ($linha = mysqli_fetch_assoc($resultado)){    
         ?>
           <ul> 
             <li class="imagem"> <img src="<?php echo $linha["imagempequena"]?>" alt="Produto" title="Produto"></img></li>
             <li><h3> <?php echo $linha["nomeproduto"] ?></h3></li>
             <li>Tempo de entrega: <?php echo $linha["tempoentrega"] ?> dias</li>
          	 <li>Pre√ßo: R$ <?php echo number_format($linha["precounitario"],2,",",".") ?> </li>
  
     	   </ul>
               <?php
                    }
                ?>
            </div>
        </main>
~~~~



**Aplicando o formato da moeda Real no pre√ßo do produto**



- Chame a fun√ß√£o numer_format() e insira o pre√ßo dentro do par√¢metro

- Em seguida, a quantidade de casas decimais, o s√≠mbolo divis√≥rio das unidades de milhares e o s√≠mbolo divis√≥rio das dezenas ne milhares (caso ultrapasse 9999), respectivamente

  

~~~~php+html
<li>Pre√ßo: R$ <?php echo number_format($linha["precounitario"],2,",",".") ?> </li>
~~~~



Outra forma √© criar uma fun√ß√£o em um arquivo externo e realizar essas fun√ß√µes, a fim de simplificar o c√≥digo, conforme exemplo abaixo 

Obs: necess√°rio fazer a inclus√£o do arquivo no in√≠cio do c√≥digo

~~~~php+html
<!--Arquivo funcoes.php -->
<?php
    function real_format($valor) {
        $valor  = number_format($valor,2,",",".");
        return "R$ " . $valor;
    }
?>
~~~~

Agora, observe a linha "Pre√ßo":

~~~~php+html
<!--arquivo principal-->

<?php
    $produtos = "SELECT produtoID, nomeproduto, tempoentrega, precounitario, imagempequena ";
    $produtos .=" FROM produtos ";
    $resultado = mysqli_query($conecta,$produtos); //obs: conecta √© a conex√£o que est√° localizada na pasta privada
    if (!$resultado){
        die("Falha na consulta ao banco");
    }
?>
<!--Importando arquivo que cont√©m as fun√ß√µes-->
<?php include_once("../_incluir/funcoes.php"); ?>

<div id="listagem_produtos">
     <?php
       while ($linha = mysqli_fetch_assoc($resultado)){    
      ?>
     <ul>   
       <li class="imagem"> <img src="<?php echo $linha["imagempequena"]?>" alt="Produto" title="Produto"></img></li>
       <li><h3> <?php echo $linha["nomeproduto"] ?></h3></li>
       <li>Tempo de entrega: <?php echo $linha["tempoentrega"] ?> dias</li>
       <li>Pre√ßo: <?php echo real_format($linha["precounitario"]) ?> </li>
  	</ul>

     <?php
        }
      ?>
</div>
~~~~



### Criar links com par√¢metro de URL

<em>Abrir arquivo avancado>public>unidade_05>listagem.php</em>



Neste caso, iremos inserir ID do produto no par√¢metro da imagem.

Para isso, √© necess√°rio atribuir o c√≥digo PHP no par√¢metro do link, ap√≥s chamar o arquivo detalhe.php

~~~~php+HTML
<a href="detalhe.php?codigo=<?php echo $linha["produtoID"] ?> ">
~~~~

A cria√ß√£o do par√¢metro vem logo ap√≥s o sinal de interroga√ß√£o (?)

~~~~php+html
<div id="listagem_produtos"> 
            <?php
                while($linha = mysqli_fetch_assoc($resultado)) {
            ?>
                <!--Inserindo links ao redor da imagem-->
                <ul>
                
                    <li class="imagem">
                        <!--Inserindo o par√¢metro na imagem ?php=[c√≥digo php] -->
                        <a href="detalhe.php?codigo=<?php echo $linha["produtoID"] ?> ">
                            <img src="<?php echo  $linha["imagempequena"] ?>">
                        </a>
                    </li>

                    <li>
                        <h3><?php echo $linha["nomeproduto"] ?></h3>
                    </li>

                    <li>
                        Tempo de Entrega : <?php echo $linha["tempoentrega"] ?>
                    </li>

                    <li>
                        Pre√ßo unit√°rio : <?php echo real_format($linha["precounitario"]) ?>
                    </li>
                </ul>
             
             
             <?php
                }
            ?>           
            </div>
~~~~



### Testar Par√¢metro

<em>Abrir arquivo avancado>public>unidade_05>detalhes.php</em>



Recebendo o c√≥digo atrav√©s do m√©todo GET (j√° que os dados est√£o sendo enviados via URL)

~~~~php+html
<?php
    
    if( isset($_GET["codigo"]) ){
        $produtoID = $_GET["codigo"];
    }else{
      
        Header("Location: listagem.php");
    }

?>
~~~~

Caso o usu√°rio entre direto na p√°gina de detalhe (esta p√°gina), ele ser√° redirecionado para a p√°gina de listagem.





### Fazer um filtro na p√°gina Detalhe

<em>Abrir arquivo avancado>public>unidade_05>detalhes.php</em>



Criando a consulta ao banco de dados

~~~~php+html
<?php
    
    if( isset($_GET["codigo"]) ){
        $produtoID = $_GET["codigo"];
    }else{
        
        Header("Location: listagem.php");
    }
    //CONSULTA AO BANCO DE DADOS

    $consulta = "SELECT * ";
    $consulta .= " FROM produtos ";
    $consulta .= "WHERE produtoID = {$produtoID}"; 
	//OBSERVA√á√ÉO IMPORTANTE: a query deve ser constru√≠da com o uso de aspas duplas ("")
    //o produtoID, ap√≥s o where, referece ao ID do banco de dados, que serviu de par√¢metro para o link da imagem no arquivo listagem.php
    //J√° vari√°vel produtoID √© referente ao produtoID localizado acima.
    //Vale lembrar que a vari√°vel $conecta √© referente a conex√£o com o banco, localizado na pasta privada
    $detalhe = mysqli_query($conecta,$consulta);

    //Realizando o teste de conex√£o
    if (!$detalhe){
        die("Falha no banco de dados");
    }else{
        //caso esteja tudo OK, todo o array acima ser√° jogado para a vari√°vel $dados_detalhe
        $dados_detalhe=mysqli_fetch_assoc($detalhe);
    }
?>
~~~~

Para realizar o teste, basta adicionar um array no main do HTML com a vari√°vel que recebeu todas as informa√ß√µes, neste caso $dados_detalhe

~~~~php+html
 <main>  
        <?php
             print_r($dados_detalhe);
         ?>
</main>
~~~~



### Apresentar os dados na tela de forma organizada

<em>Abrir arquivo avancado>public>unidade_05>detalhes.php</em>



Primeiramente, √© preciso criar e atribuir vari√°veis para ser inserida de forma organizada no corpo do HTML.

~~~~php+html
<?php
    if( isset($_GET["codigo"]) ){
        $produtoID = $_GET["codigo"];
    }else{
        Header("Location: listagem.php");
    }

    $consulta = "SELECT * ";
    $consulta .= " FROM produtos ";
    $consulta .= "WHERE produtoID = {$produtoID}"; 
    $detalhe = mysqli_query($conecta,$consulta);

    if (!$detalhe){
        die("Falha no banco de dados");
    }else{
        $dados_detalhe=mysqli_fetch_assoc($detalhe);
        
        $produtoID      = $dados_detalhe["produtoid"];
        $nomeproduto    = $dados_detalhe["nomeproduto"];
        $descricao      = $dados_detalhe["descricao"];
        $codigobarra    = $dados_detalhe["codigobarra"];
        $tempoentrega   = $dados_detalhe["tempoentrega"];
        $precovenda     = $dados_detalhe["precorevenda"];
        $precounitario  = $dados_detalhe["precounitario"];
        $estoque        = $dados_detalhe["estoque"];
        $imagemgrande   = $dados_detalhe["imagemgrande"];

    }
?>
~~~~

Agora, vamos criar os elementos da lista e utilizar as vari√°veis declaradas acima

~~~~php+html
 <main>  
           <div id="detalhe_produto">
                <ul>
                    <li class="imagem"> <img src="<?php echo $imagemgrande ?>"></li>
                    <li><?php echo $nomeproduto ?></li>
                    <li><?php echo $descricao ?></li>
                    <li><?php echo $codigobarra ?></li>
                    <li><?php echo $tempoentrega ?></li>
                    <li><?php echo $precovenda ?></li>
                    <li><?php echo $precounitario ?></li>
                    <li><?php echo $estoque ?></li>

                </ul>
           </div>
        </main>
~~~~



### Aplicando estilos e fun√ß√µes monet√°rias



~~~~php+html

~~~~



### Criar um Formul√°rio de Pesquisa

*Arquivo avancado>unidade 06> listagem.php*



~~~~php+html
 <!--Adicionando a barra de pesquisa com o m√©todo GET-->
            <div id="janela_pesquisa">
                <form action="istagem.plhp" method="get">
                    <input type="text" name="produto" placeholder="Nome do Produto">
                    <input id="botao_pesquisa"type="image" name="pesquisa" src="../_assets/botao_search.png">
                </form>
            </div>      
~~~~



Gerando a pesquisa no banco de dados:

~~~~php+html
<?php
      // Consulta ao banco de dados
    $produtos = "SELECT produtoID, nomeproduto, tempoentrega, precounitario, imagempequena ";
    $produtos .= " FROM produtos ";
    //Condi√ß√£o para realizar o filtro se o input produto (o campo de pesquisa) do formul√°rio estiver incrementado
    if ( isset($_GET['produto'])){
        //A pesquisa ser√° atribu√≠da a uma vari√°vel e, em seguida, jogada para o select;
        $nome_produto = $_GET["produto"];
        $produtos .= " WHERE nomeproduto LIKE '%{$nome_produto}%'  ";
    }
    
    $resultado = mysqli_query($conecta, $produtos);
    if(!$resultado) {
        die("Falha na consulta ao banco");   
    }
?>
~~~~

O LIKE, junto com o caractere coringa (%) que vem antes e depois da vari√°vel, buscar√° os produtos, mesmo se o nome n√£o for digitado corretamente.

O nome da vari√°vel que recebe o $_GET[] na condi√ß√£o isset precisa ser o nome do input inserido no HTML:

~~~~php+html
<input type="image" name="pesquisa" src="../_assets/botao_search.png">
~~~~



### Criar uma vari√°vel de sess√£o



Primeiramente, √© necess√°rio que todas as p√°ginas do projeto possuam a fun√ß√£o session_start();. Essa fun√ß√£o √© respons√°vel por manter o usu√°rio logado nas p√°ginas.

Em seguida, cria-se uma vari√°vel session e atribu√≠mos a ela as credenciais de login se senha. Inicialmente utilizaremos apenas o login.



~~~~php+html
<?php
    //iniciar a sess√£o de login. 
    session_start();

    //Criar uma vari√°vel de sess√£o
    $_SESSION["usuario"] = "Junior";

?>

~~~~

Para certificar que o usu√°rio est√° logado em todas as p√°ginas, basta imprimir na tela a vari√°vel session

~~~~php+html
<main>  
            <?php
                echo $_SESSION["usuario"];   
            ?>
            <p><a href="pagina1.php">P√°gina 1</a></p>
        </main>
~~~~



### Encerrar a vari√°vel de sess√£o

Crie uma novo arquivo php e utilize pelo menos uma das seguintes vari√°veis:



~~~~php+html
<?php
                //REMOVE A VARI√ÅVEL SESSION MENCIONADAS
                unset($_SESSION["usuario"]);
                
                //DESTROI TODAS AS VARI√ÅVEIS DE SESS√ÉO DO PROJETO
                session_destroy();

            ?>
~~~~



### Criar uma tela de Login



~~~~php+html
 <main>  

            <div id="janela_login">
                <!--necess√°rio usar o moethod post, pois o GET exibe as informa√ß√µes na barra de endere√ßo-->
                <form action="login.php" method="post">
                    <h2>Tela de Login</h2>
                    <input type="text" name="usuario" placeholder="Usu√°rio">
                    <input type="password" name="senha" placeholder="Senha" >
                    <input type="submit" value='Login'>
                </form>
            </div>


        </main>
~~~~



### Recebendo as informa√ß√µes enviadas



No arquivo login.php

~~~~php+html
<?php
    if (isset($_POST["usuario"])){
        $usuario = $_POST["usuario"];
        $senha = $_POST["senha"];
         //valida√ß√£o de dados
        echo $usuario."<br>";
        echo $senha;      
   
?>
~~~~



### Realizar o filtro de login no banco de dados

Arquivo login.php

~~~~php+html
<?php
    if (isset($_POST["usuario"])){
        $usuario = $_POST["usuario"];
        $senha = $_POST["senha"];

        //REALIZANDO O FILTRO NO BANCO DE DADOS
        $login = " SELECT * FROM clientes WHERE usuario = '{$usuario}' and senha = '{$senha}' ";

        //ATRIBUINDO OS RESULTADOS √Ä VARI√ÅVEL ACESSO
        $acesso = mysqli_query($conecta,$login);

        //TESTANDO CONEX√ÉO
        if (!$acesso){
            die ("Falha na consulta ao banco de dados");
        }

        $informacao = mysqli_fetch_assoc($acesso);

        //VALIDANDO DADOS(CASO O USU√ÅRIO N√ÉO SEJA ENCONTRADO). 
        if (empty($informacao)){
            $mensagem = "Usu√°rio n√£o localizado.";
        }else{
            //SE FOR ENCONTRADO, SER√Å REDIRECIONADO PARA A P√ÅGINDA DE LISTAGEM
            header("location:listagem.php");
        }
    }
  
?>

~~~~

No html do arquivo:

~~~~php+html
<main>  
            <div id="janela_login">
                <!--necess√°rio usar o moethod post, pois o GET exibe as informa√ß√µes na barra de endere√ßo-->
                <form action="login.php" method="post">
                    <h2>Tela de Login</h2>
                    <input type="text" name="usuario" placeholder="Usu√°rio">
                    <input type="password" name="senha" placeholder="Senha" >
                    <input type="submit" value='Login'>

                    <!--Exibindo a mensagem de erro-->
                    <?php   
                        //se a vari√°vel mensagem foi definida:
                        if (isset($mensagem)){   
                    ?>
                        <p><?php echo $mensagem ?></p>

                    <?php
                        }
                    ?>

                </form>
            </div>
        </main>
~~~~

#### Caracteres UTF8

Caso os caracteres especiais n√£o sejam exibidos no site, basta utilizar a fun√ß√£o utf8_encode

~~~~php+html
<?php echo utf8_encode ($linha["nome"]); ?>
~~~~





### Acrescentando a vari√°vel sess√£o



Crie uma nova p√°gina php para servir de seguran√ßa e, em seguida, atribua a ela o c√≥digo de seguran√ßa:

~~~~php+html
<!--Iniciando a vari√°vel sess√£o e protegendo a p√°gina-->
<?php 
    session_start(); 

    //se a vari√°vel session n√£o estiver definida, o site ser√° redirecionado para a p√°gina de login
    if (!isset($_SESSION["user_portal"])){
        header("location:login.php");
    }

?>
~~~~

Para proteger as demais p√°ginas, basta inserir o c√≥digo acima atrav√©s do require_once no in√≠cio de todas as p√°ginas do projeto:

~~~~php+html
<!---require de conex√£o com o bd-->
<?php require_once("../../conexao/conexao.php"); ?>
<!--require de seguran√ßa-->
<?php require_once("../../conexao/seguranca.php");?>
~~~~





### Criando uma rotina de sauda√ß√£o

*Arquivo _incluir>topo.php*

~~~~php+html
<?php
            if (isset($_SESSION["user_portal"])){
                $user = $_SESSION["user_portal"];

                $saudacao = "SELECT nomecompleto ";
                $saudacao .= " FROM clientes ";
                $saudacao .= " where clienteID = {$user} ";

                $saudacao_login = mysqli_query($conecta, $saudacao);
                if (!$saudacao_login){
                    die("Falha no banco");
                }
                $saudacao_login = mysqli_fetch_assoc($saudacao_login);
                $nome= $saudacao_login ["nomecompleto"];
        ?>
        
        <div id="header_saudacao"> 
            <h5>Bem vindo, <?php echo $nome; ?>! </h5>
        </div>


        <?php
            }
        ?>
~~~~



### Criando uma p√°gina de Logout

Arquivo *_incluir>topo.php*

~~~~php+html
<h5>Bem vindo, <?php echo $nome; ?>! - <a href="sair.php"> Sair <a> </h5>
~~~~

Novo arquivo *sair.php*

~~~~php+html
<?php
    session_start();
    unset($_SESSION["user_portal"]);
    header("location:login.php");
?>
~~~~



### Criando formul√°rio de inser√ß√£o de dados (HTML)

~~~~php+HTML
  <main>  
            <div id="janela_formulario">
                <form action="inserir.php" method="post">
                    <input type="text" name="nometransportadora" placeholder="Nome da Transportadora">
                    <input type="text" name="endereco" placeholder="Endere√ßo">
                    <input type="text" name="telefone" placeholder="Telefone">
                    <input type="text" name="cidade" placeholder="Cidade">
                    <select name="estados">
                        <?php
                            while($linha=mysqli_fetch_assoc($lista_estados)){

                        ?>
                        <option value="<?php echo $linha["estadoID"]; ?>">
                            <?php echo $linha["nome"]; ?>
                        </option>
                        <?php
                            }
                        ?>
                    </select>
                    <input type="text" name="cep" placeholder="CEP">
                    <input type="text" name="cnpj" placeholder="CNPJ">
                    <input type="submit" name="enviar" placeholder="Enviar">
                    
                </form>
            </div>
        </main>
~~~~

Select para os estados cadastrados no banco

~~~php+HTML
<?php
    $select = "SELECT estadoID, nome FROM estados";
    $lista_estados = mysqli_query($conecta,$select);
    if (!$lista_estados){
        die("Erro no banco de dados");
    }
?>
~~~

verificando se algum campo foi preenchido. nesse caso, ser√° o nome da transportadora

~~~php

    if (isset($_POST["nometransportadora"])){
        print_r($_POST);
    }
~~~



### Inserindo dados no Banco de Dados

Query de inser√ß√£o MySQL

~~~~php
    //jogando os dados do forum√°rio em vari√°veis
    if (isset($_POST["nometransportadora"])){
        $nome       = $_POST["nometransportadora"];
        $endereco   = $_POST["endereco"];
        $cidade     = $_POST["cidade"];
        $estados    = $_POST["estados"];
        $cep        = $_POST["cep"];
        $cnpj       = $_POST["cnpj"];
        $telefone   = $_POST["telefone"];

        //select de inser√ß√£o
        $inserir    =" INSERT INTO transportadoras VALUES ";
        $inserir   .=" (null, '$nome','$endereco','$cidade',$estados,'$cep','$cnpj','$telefone')";


        $operacao_inserir = mysqli_query($conecta,$inserir);

        //verificando casos de erro
        if(!$operacao_inserir){
            die("Falha ao cadastrar transportadoras");
        }
    }
~~~~



#### Decodificando os caracteres UTF-8

√â prov√°vel quem, em alguns casos, os caracteres especiais n√£o sejam reconhecidos pelo banco. Dessa forma, √© necess√°rio utilizar a fun√ß√£o utf8_decode antes da vari√°vel $_POST. **√â importante realizar o teste antes de acrescentar a fun√ß√£o, pois, caso o banco reconhe√ßa os caracteres, a fun√ß√£o poder√° fazer o efeito contr√°rio.**

~~~~php
 $nome       = utf8_decode ($_POST["nometransportadora"]);
~~~~



### Alterando dados no Banco de Dados



Criando o formul√°rio de altera√ß√£o

~~~~php+html
<div id="janela_formulario">
                <form action="alteracao.php" method="post">
                    <h2> Altera√ß√£o de Transportadoras </h2>
                    <!--O label √© respons√°vel por focar o t√≠tulo do campo, a √°rea de preenchimento-->
                    <label for="nometransportadora">Nome da Transportadora</label>
                    <input type="text" value="" name="nometransportadora" id="nometransportadora">

                    <label for="endereco">Endere√ßo</label>
                    <input type="text" value="" name="endereco" id="endereco">

                    <label for="cidade">Cidade</label>
                    <input type="text" value="" name="cidade" id="cidade">

                    <label for="estados">Estado</label>
                    <select id="estados" name="estados">

                    </select>

                    <label for="cep">CEP</label>
                    <input type="text" value="" name="cep" id="cep">

                    <label for="telefone">Telefone</label>
                    <input type="text" value="" name="telefone" id="nometransportadora">

                    <label for="cnpj">CNPJ</label>
                    <input type="text" value="" name="cnpj" id="nometranspocnpjrtadora">

                    <input type="submit" name="salvar" placeholder="Salvar">


                </form>
            </div>
~~~~

Criando a consulta no banco que ser√° exibida na tela de login

~~~~php+html
<?php
    $tr = "SELECT * ";
    $tr .=" FROM transportadoras ";
    if(isset($_GET["codigo"])){
        $id = $_GET["codigo"];
        // o ID do c√≥digo do produto ser√° atribu√≠do √† query
        $tr .= "WHERE transportadaoraID = {$id} "; 
    }else{
        //Caso o usu√°rio acesse diretamente a p√°gina altera√ß√£o, sem clicar em algum produto, ele ser√° redirecionado para o produtoi de c√≥digo 1
        $tr .= "WHERE transportadoraID = 1 ";
    }

    $con_transportadora = mysqli_query($conecta,$tr);
    if(!$con_transportadora){
        die("Falha na consulta");
    }
?>
~~~~





### Preenchendo os campos do formul√°rio de altera√ß√£o automaticamente



Criando um array que ser√° jogado no value de cada campo do formul√°rio

~~~~php
$info_transportadora = mysqli_fetch_assoc($con_transportadora);
~~~~



No formul√°rio HTML:

~~~~php+html
<h2> Altera√ß√£o de Transportadoras </h2>
                  
    <label for="nometransportadora">Nome da Transportadora</label>
 	<input type="text" value="<?php echo $info_transportadora["nometransportadora"]; ?> " name="nometransportadora" id="nometransportadora">
~~~~



#### Preenchendo automaticamente campos com select



~~~~php
$estados = "SELECT * FROM estados";
    //essa vari√°vel ser√° jogada no mysqli_fetch_assoc do campo value
    $lista_estados = mysqli_query($conecta,$estados);
    if (!$lista_estados){
        die ("Falha na consulta ao banco de dados");
    }
~~~~

No HTML:

~~~~php+html
<select id="estados" name="estados">
                        <?php
                            //A vari√°vel meuestado receber√° o c√≥digo do estado
                            $meuestado = $info_transportadora["estadoID"];
                            while($linha = mysqli_fetch_assoc($lista_estados)){
                                $estado_principal = $linha["estadoID"];
                                if($meuestado == $estado_principal){
                        ?>
                            <option value="<?php echo $linha["estadoID"]; ?>"> 
                                <?php echo $linha["nome"]; ?>
                            </option>

                        <?php
                            }else{

                            }
                        ?>
                        <?php
                        }
                        ?>
~~~~



Receber as informa√ß√µes alteradas no formul√°rio

~~~~php
if (isset($_POST["nometransportadora"])){
        $nome       = $_POST["nometransportadora"];
        $endereco   = $_POST["endereco"];
        $cidade     = $_POST["cidade"];
        $estados    = $_POST["estados"];
        $cep        = $_POST["cep"];
        $cnpj       = $_POST["cnpj"];
        $telefone   = $_POST["telefone"];
        $id   = $_POST["transportadoraID"];
    }
~~~~

Observa√ß√£o: o id, por ser uma chave estrangeira, foi recebido atrav√©s de um campo oculto no formul√°rio, vide c√≥digo abaixo:

~~~~php+html
<input type="hidden" name="transportadoraID" value="<?php echo $info_transportadora["transportadoraID"]; ?>">
~~~~

Criando o objeto de altera√ß√£o:

~~~~php
$alterar  = " UPDATE transportadoras  ";
        $alterar .= " SET ";
        $alterar .= " nometransportadora = '{$nome}',";
        $alterar .= " endereco = '{$endereco}',";
        $alterar .= " cidade = '{$cidade}',";
        $alterar .= " estadoID = {$estados},";
        $alterar .= " cep = '{$cep}',";
        $alterar .= " cnpj = '{$cnpj}',";
        $alterar .= " telefone = '{$telefone}' ";
        $alterar .= " WHERE ";
        $alterar .= " transportadoraID = {$tID}";

        $operacao_alterar = mysqli_query($conecta,$alterar);
        if (!$operacao_alterar){
            die("Erro na altera√ß√£o dos dados");
        }else{
            header("location:listagem.php");
        }
    }
~~~~



### Excluir dados do banco de dados



Criando a consulta a tabela de transportadora

~~~~php
$tr=" SELECT * FROM transportadoras ";
    if( isset($_GET["codigo"])){
        $id = $_GET["codigo"];
        $tr .= " WHERE transportadoraID = {$id} ";
    }

    $con_transportadora = mysqli_query($conecta, $tr);
    if (!$con_transportadora){
        die("Erro na consulta");
    }
    $info_transportadora = mysqli_fetch_assoc($con_transportadora);
~~~~



Formul√°rio de confirma√ß√£o de exclus√£o (o mesmo de altera√ß√£o, com campos reduzidos)

~~~~php+html
<main>  
            <div id="janela_formulario">
                <form action="exclusao.php" method="post">
                    <h2>Exclus√£o de Transportadoras</h2>
                    
                    <label for="nometransportadora">Nome da Transportadora</label>
                    <input type="text" value="<?php echo $info_transportadora["nometransportadora"]  ?>" name="nometransportadora" id="nometransportadora">

                    <label for="endereco">Endere√ßo</label>
                    <input type="text" value="<?php echo $info_transportadora["endereco"]  ?>" name="endereco" id="endereco">
                    
                    <label for="cidade">Cidade</label>
                    <input type="text" value="<?php echo $info_transportadora["cidade"]  ?>" name="cidade" id="cidade">          

                    <input type="hidden" name="transportadoraID" value="<?php echo $info_transportadora["transportadoraID"] ?>">
                    <input type="submit" value="Confirmar Exclus√£o">                    
                </form>   
            </div>
        </main>

~~~~

Excluindo o registro:

~~~~php
if (isset($_POST["nometransportadora"])){
        $t_id = $_POST["transportadoraID"];

        $exclusao  = "DELETE FROM transportadoras ";
        $exclusao .= " WHERE transportadoraID = {$t_id}";
        $con_exclusao = mysqli_query($conecta,$exclusao);
        if (!$con_exclusao){
            die("Falha ao excluir o registro");
        }else{
            header("Location:listagem.php");
        }
    }
~~~~



### Realizando o upload de arquivos

Configura√ß√£o do PHP.INI para uploads

- file_uploads tem que estar ON (true)

- upload_tmp_dir

- post_max_size(128MB)

- upload_max_filesize (128MD) - Configura√ß√£o para tamanho m√°ximo do arquivo
- max_execution_time (30s) - Tempo m√°ximo de processamento para um determinado servi√ßo
- max_input_time(60s) - Tempo m√°ximo de execu√ß√£o de algum script



Crie uma pasta para servir de uploads e defina o privil√©gio dela como "leitura e grava√ß√£o". 

√â importante que essa configura√ß√£o seja informada ao provedor de hospedagem do site. Por motivos de seguran√ßa, essa pasta n√£o deve **rodar ou publicar algum arquivo de script**.



#### Criando o formul√°rio de upload de arquivos



~~~~php+html
<main>  
            
            <!--O atributo enctype multipart/form-data define o formul√°rio como upload de arquivos-->
            <form action="upload.php" method="post" enctype="multipart/form-data">

                <!--input MAX_FILE_SIZE define o tamanho m√°ximo de upload de algum arquivo-->
                <input type="hidden" name="MAX_FILE_SIZE" value="1000000">

                <!--O tipo de input file permite que o navegador abra uma janela para no explore para selecionar arquivos-->

                <input type="file" name="upload_file">
                <input type="submit" name="enviar" value="Publicar" >'
            </form>

        </main>
~~~~

#### 

#### Reconhecendo o $_FILES



~~~~php
if(isset($_POST["enviar"])){
        echo "<pre>";
        print_r($_FILES["upload_flie"]);
        echo "<pre>";
    }
~~~~

Resultado ap√≥s realizar o upload de algum arquivo:



<a href="https://imgur.com/bts5b40"><img src="https://i.imgur.com/bts5b40.png" title="source: imgur.com" /></a>

Tendo em vista que o array do $_FILES √© associativo, √© poss√≠vel pegar apenas os dados desejados

Exemplo:

~~~php
print_r($_FILES["upload_flie"]["name"]);

//RESULTADO
DataTechnology_Coursebook.pdf
~~~



#### Analisando mensagens de erro

**`UPLOAD_ERR_OK`**

Valor: 0; n√£o houve erro, o upload foi bem sucedido.

**`UPLOAD_ERR_INI_SIZE`**

Valor 1; O arquivo enviado excede o limite definido na diretiva [upload_max_filesize](https://www.php.net/manual/pt_BR/ini.core.php#ini.upload-max-filesize) do php.ini.

**`UPLOAD_ERR_FORM_SIZE`**

Valor: 2; O arquivo excede o limite definido em *MAX_FILE_SIZE* no formul√°rio HTML.

**`UPLOAD_ERR_PARTIAL`**

Valor: 3; O upload do arquivo foi feito parcialmente.

**`UPLOAD_ERR_NO_FILE`**

Valor: 4; Nenhum arquivo foi enviado.

**`UPLOAD_ERR_NO_TMP_DIR`**

Valor: 6; Pasta tempor√°ria ausente. Introduzido no PHP 5.0.3.

**`UPLOAD_ERR_CANT_WRITE`**

Valor: 7; Falha em escrever o arquivo em disco. Introduzido no PHP 5.1.0.

**`UPLOAD_ERR_EXTENSION`**

Valor: 8; Uma extens√£o do PHP interrompeu o upload do arquivo. O PHP n√£o fornece uma maneira de determinar qual extens√£o causou a interrup√ß√£o. Examinar a lista das extens√µes carregadas com o [phpinfo()](https://www.php.net/manual/pt_BR/function.phpinfo.php) pode ajudar. Introduzido no PHP 5.2.0.



#### Exibindo a mensagem de erro no navegador



~~~~php
<?php
    //TABELA DE POSS√çVEIS ERROS (em ordem correta, de acordo com a documenta√ß√£o)
    $array_erro = array(
        UPLOAD_ERR_OK => "Sem erro.",
        UPLOAD_ERR_INI_SIZE => "O arquivo enviado excede o limite definido na diretiva upload_max_filesize do php.ini.",
        UPLOAD_ERR_FORM_SIZE => "O arquivo excede o limite definido em MAX_FILE_SIZE no formul√°rio HTML",
        UPLOAD_ERR_PARTIAL => "O upload do arquivo foi feito parcialmente.",
        UPLOAD_ERR_NO_FILE => "Nenhum arquivo foi enviado.",
        UPLOAD_ERR_NO_TMP_DIR => "Pasta tempor√°ria ausente.",
        UPLOAD_ERR_CANT_WRITE => "Falha em escrever o arquivo em disco.",
        UPLOAD_ERR_EXTENSION => "Uma extens√£o do PHP interrompeu o upload do arquivo."
    ); 

    //RECONHECENDO O $_FILES
    if(isset($_POST["enviar"])){
        //associando o n√∫mero do erro ao erro afim de saber a causa.
        $numero_erro = $_FILES['upload_file']['error'];
        //o index do array_erro √© o n√∫mero referente ao erro
        $mensagem = $array_erro[$numero_erro];

        echo "<pre>";
        print_r($_FILES["upload_file"]); //Array associativo
        echo "<pre>";
        echo "<hr>";
        echo $mensagem;
    }


?>
~~~~

Mais informa√ß√µes: https://www.php.net/manual/pt_BR/features.file-upload.errors.php



#### Movendo os arquivos da pasta tempor√°ria para a permanente



~~~php
if(isset($_POST["enviar"])){
        $numero_erro = $_FILES['upload_file']['error'];
        $mensagem = $array_erro[$numero_erro];
        
        //Capturando o arquivo da pasta tempor√°ria
        $arquivo_temporario = $_FILES['upload_file']['tmp_name'];
    
        //A fun√ß√£o basename captura apenas o nome do arquivo
        $arquivo = basename($_FILES['upload_file']['name']);
        $diretorio = "uploads";

        //A fun√ß√£o move_uploaded_file √© respons√°vel por mover o arquivo da pasta tempor√°ria para a permanente (uploads)
        if (move_uploaded_file($arquivo_temporario,$diretorio."/".$arquivo)){
            $mensagem = "Arquivo publicado com sucesso!";
        }else{
            $numero_erro = $_FILES['upload_file']['error'];
            $mensagem = $array_erro[$numero_erro];
        }
    }   
~~~



Para exibir o status da a√ß√£o, basta imprimir a mensagem no HTML do arquivo:

~~~~php
 <?php       
     if(isset($mensagem)){
      	echo $mensagem;
     }
  ?>
~~~~



#### Otimizando o c√≥digo de upload

Crie um novo arquivo chamado funcoes.php e leve todo o c√≥digo de erro e processamento de arquivo para ele

~~~php
<?php
    function mostrarAvisoPublicacao($numero){
        $array_erro = array(
            UPLOAD_ERR_OK => "Sem erro.",
            UPLOAD_ERR_INI_SIZE => "O arquivo enviado excede o limite definido na diretiva upload_max_filesize do php.ini.",
            UPLOAD_ERR_FORM_SIZE => "O arquivo excede o limite definido em MAX_FILE_SIZE no formul√°rio HTML",
            UPLOAD_ERR_PARTIAL => "O upload do arquivo foi feito parcialmente.",
            UPLOAD_ERR_NO_FILE => "Nenhum arquivo foi enviado.",
            UPLOAD_ERR_NO_TMP_DIR => "Pasta tempor√°ria ausente.",
            UPLOAD_ERR_CANT_WRITE => "Falha em escrever o arquivo em disco.",
            UPLOAD_ERR_EXTENSION => "Uma extens√£o do PHP interrompeu o upload do arquivo."
        ); 

        return $array_erro[$numero];
    }

    function publicarArquivo($imagem){
         //Capturando o arquivo da pasta tempor√°ria
         $arquivo_temporario = $imagem['tmp_name'];
         //A fun√ß√£o basename captura apenas o nome do arquivo
         $arquivo = basename($imagem['name']);
         $diretorio = "uploads";
 
    
         //A fun√ß√£o move_uploaded_file √© respons√°vel por mover o arquivo da pasta tempor√°ria para a permanente (uploads)
         if (move_uploaded_file($arquivo_temporario,$diretorio."/".$arquivo)){
             $mensagem = "Arquivo publicado com sucesso!";
         }else{
             $numero_erro = $_FILES['upload_file']['error'];
             $mensagem = mostrarAvisoPublicacao($imagem['error']);
         }

         return $mensagem;
    }
?>
~~~

No arquivo upload.php:

~~~~php
<?php
    
    if(isset($_POST["enviar"])){
        $mensagem = publicarArquivo($_FILES['upload_file']);   
    }   


?>
~~~~





#### Fun√ß√£o para gerar nome √∫nico de um arquivo



~~~php
<?php
    $alfabeto   = "123456789abcdefghijklmnopqrstuvwxyz";
    $tamanho    = 12;
    $letra      = "";
    $resultado  = "";

    for ($i = 1 ; $i<$tamanho ; $i++){
        //o For ir√° jogar uma letra aleat√≥ria entre os caracteres 0 e 23 da vari√°vel $alfabeto durante 12 repeti√ß√µes
        $letra      = substr($alfabeto, rand(0,23),1);
        $resultado .= $letra;
    }

    echo $resultado."<br>";

    //pegando a data e hora da regi√£o
    date_default_timezone_set('America/Recife');
    $agora = getdate();
    $codigo_data = $agora['year'] . "" . $agora['yday']; //yday representa o dia do dano
    $codigo_data .= $agora['hours'] . $agora['minutes'] . $agora['seconds'];

    //O nome da foto ser√° uma jun√ß√£o do ano, do dia, da hora, dos minutos, dos segundos e dos caracteres aleat√≥rios gerados acima.
    echo "foto_".$codigo_data.$resultado;

?>
~~~



#### Fun√ß√£o para pegar a extens√£o de um arquivo

~~~~php
<?php
    $arquivo = "fot.png o.jpg.png";
    //a fun√ß√£o strrchr pegar√° o os caracteres a partir do √∫ltimo ponto no nome do arquivo. Ou seja, a extens√£o.
    echo strrchr($arquivo,".");

?>
~~~~



#### Adicionando os c√≥digos ao arquivo de fun√ß√µes (arquivo definitivo)

#### 

~~~php
<?php
    //FUN√á√ÉO PARA GERAR NOME √öNIDO DA IMAGEM
    function gerarCodigoUnico(){
        $alfabeto   = "123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        $tamanho    = 30;
        $letra      = "";
        $resultado  = "";

        for ($i = 1 ; $i<= $tamanho ; $i++){
            //o For ir√° jogar uma letra aleat√≥ria entre os caracteres 0 e 23 da vari√°vel $alfabeto durante 12 repeti√ß√µes
            $letra      = substr($alfabeto, rand(0,23),1);
            $resultado .= $letra;
        }

        //pegando a data e hora da regi√£o
        date_default_timezone_set('America/Recife');
        $agora = getdate();
        $codigo_data = $agora['year'] . $agora['yday']; //yday representa o dia do dano
        $codigo_data .= $agora['hours'] . $agora['minutes'] . $agora['seconds'];

        //O nome da foto ser√° uma jun√ß√£o do ano, do dia, da hora, dos minutos, dos segundos e dos caracteres aleat√≥rios gerados acima.
        return $codigo_data.$resultado;
        }
     
     //FUN√á√ÉO PARA PEGAR A EXTENS√ÉO DA IMAGEM
     function getExtensao($nome){
        return strrchr($nome,".");
    }   

    //FUN√á√ÉO PARA IDENTIFICAR O ERRO DE UPLOAD
    function mostrarAvisoPublicacao($numero){
        $array_erro = array(
            UPLOAD_ERR_OK => "Sem erro.",
            UPLOAD_ERR_INI_SIZE => "O arquivo enviado excede o limite definido na diretiva upload_max_filesize do php.ini.",
            UPLOAD_ERR_FORM_SIZE => "O arquivo excede o limite definido em MAX_FILE_SIZE no formul√°rio HTML",
            UPLOAD_ERR_PARTIAL => "O upload do arquivo foi feito parcialmente.",
            UPLOAD_ERR_NO_FILE => "Nenhum arquivo foi enviado.",
            UPLOAD_ERR_NO_TMP_DIR => "Pasta tempor√°ria ausente.",
            UPLOAD_ERR_CANT_WRITE => "Falha em escrever o arquivo em disco.",
            UPLOAD_ERR_EXTENSION => "Uma extens√£o do PHP interrompeu o upload do arquivo."
        ); 
        return $array_erro[$numero];
        
    }

    //FUN√á√ÉO PARA REALIZAR O UPLOAD DE UMA IMAGEM
    function publicarArquivo($imagem){

        
         //Capturando o arquivo da pasta tempor√°ria
         
         $arquivo_temporario = $imagem['tmp_name'];
         $nome_original     = $imagem['name'];
         //O novo nome ser√° composto pela concatena√ß√£o to textpo "img_" e os novos caracteres gerados nas fun√ß√µes anteirores
         $nome_novo         = "img_".gerarCodigoUnico().getExtensao($nome_original);
         $nome_completo     = "images/product_images/".$nome_novo;
         
    
         //A fun√ß√£o move_uploaded_file √© respons√°vel por mover o arquivo da pasta tempor√°ria para a permanente (uploads)
         if (move_uploaded_file($arquivo_temporario, $nome_completo)){
             
             return array("Imagem publicada com sucesso!", $nome_completo) ;
         }else{
             return array(mostrarAvisoPublicacao($imagem['error']),"");
         }

        
    }

    
?>
~~~



### Criando formul√°rio de contato do site

*Arquivo contato.php*

~~~~php
<?php
    if (isset($_POST['enviar'])){
        if (enviarMensagem($_POST)){
            $mensagem = "Mensagem enviada com sucesso!";
        }else{
            $mensagem = "Erro ao enviar a mensagem.";
        }
     
    }



?>
~~~~

*Arquivo funcoes.php*

~~~~php
<?php

//JOGANDO INFORMA√á√ïES DO FORMUL√ÅRIO A VARI√ÅVEIS
function enviarMensagem($dados){
    $nome_usuario = $_POST['nome'];
    $email_usuario = $_POST['email'];
    $mensagem_usuario = $_POST['mensagem'];


//CRIAR VARI√ÅVEIS DE ENVIO

//e-mail para qual os dados do fomrul√°rio ser√£o enviados
$destino = "jailson.junior36@hotmail.com";
//dom√≠nio do remetente, isto √©, dom√≠nio do site
$remetente = "seusite@imediabrasil.coom.br";
$assunto = "mensagem do site";


//MONTAR O CORPO DA MENSAGEM
$mensagem    ="O usu√°rio" . $nome_usuario . "enviou uma mensagem: " . "<br>";
$mensagem   .="Email do usu√°rio: " . $email_usuario . "<br>";
$mensagem   .="Mensagem: "."<br>";
$mensagem   .=$mensagem_usuario;

//ENVIANDO A MENSAGEM (FUN√á√ÉO MAIL)
//esta fun√ß√£o retornar√° a fun√ß√£o mail com os seguintes par√¢metros, respectivamente:
return mail($destino,$assunto,$mensagem,$remetente);

} 
?>
~~~~







# Conte√∫dos al√©m do curso



##### üìå[Como redirecionar p√°ginas ap√≥s um tempo](https://qastack.com.br/programming/6119451/page-redirect-after-certain-time-php#:~:text=Para%20resolver%20isso%2C%20use%20a,Felicidades)

##### üìå[Como inserir um reCaptcha no seu formul√°rio](https://www.youtube.com/watch?v=FE2ew5SZ0rY&t=428s&ab_channel=CursosOnline)

##### üìå[Artigo sobre SQL Injection](https://www.devmedia.com.br/sql-injection/6102)



